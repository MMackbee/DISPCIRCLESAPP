{"ast":null,"code":"var _jsxFileName = \"/Users/makelmackbee/dispcirclesapp/src/ImportHistory.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\nimport { db } from \"./firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImportHistory = ({\n  user\n}) => {\n  _s();\n  const [history, setHistory] = useState([]);\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (!user) return;\n      try {\n        const q = query(collection(db, \"userData\"), where(\"uid\", \"==\", user.uid));\n        const snapshot = await getDocs(q);\n        const batches = {};\n        snapshot.forEach(doc => {\n          const data = doc.data();\n          const batchId = data.batchId;\n          if (!batches[batchId]) {\n            var _data$uploadedAt, _data$uploadedAt$toDa;\n            batches[batchId] = {\n              notes: data.notes || \"No notes\",\n              uploadedAt: ((_data$uploadedAt = data.uploadedAt) === null || _data$uploadedAt === void 0 ? void 0 : (_data$uploadedAt$toDa = _data$uploadedAt.toDate) === null || _data$uploadedAt$toDa === void 0 ? void 0 : _data$uploadedAt$toDa.call(_data$uploadedAt)) || new Date(),\n              batchId,\n              shotCount: 0\n            };\n          }\n          batches[batchId].shotCount += 1;\n        });\n        const sorted = Object.values(batches).sort((a, b) => b.uploadedAt - a.uploadedAt);\n        setHistory(sorted);\n      } catch (err) {\n        console.error(\"‚ùå Failed to fetch history:\", err);\n      }\n    };\n    fetchHistory();\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-900 text-white p-6 mt-6 rounded-lg max-w-xl mx-auto\",\n    id: \"history\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-bold mb-4\",\n      children: \"\\uD83D\\uDCDC Import History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), history.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-400\",\n      children: \"No previous uploads found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"space-y-3 text-sm\",\n      children: history.map(entry => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/session/${entry.batchId}`,\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"p-4 rounded bg-gray-800 hover:bg-gray-700 transition cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold\",\n            children: [\"\\uD83D\\uDCDD \", entry.notes]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-400\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83D\\uDCC5 Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 48\n            }, this), \" \", entry.uploadedAt.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-400\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uC0F7 (Shots):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 48\n            }, this), \" \", entry.shotCount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-500 text-xs mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 19\n            }, this), \" \", entry.batchId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 15\n        }, this)\n      }, entry.batchId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(ImportHistory, \"PUqjgfw0ccPwtx6QxD6fWqJYeMQ=\");\n_c = ImportHistory;\nexport default ImportHistory;\nvar _c;\n$RefreshReg$(_c, \"ImportHistory\");","map":{"version":3,"names":["React","useEffect","useState","Link","collection","query","where","getDocs","db","jsxDEV","_jsxDEV","ImportHistory","user","_s","history","setHistory","fetchHistory","q","uid","snapshot","batches","forEach","doc","data","batchId","_data$uploadedAt","_data$uploadedAt$toDa","notes","uploadedAt","toDate","call","Date","shotCount","sorted","Object","values","sort","a","b","err","console","error","className","id","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","entry","to","toLocaleString","_c","$RefreshReg$"],"sources":["/Users/makelmackbee/dispcirclesapp/src/ImportHistory.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\nimport { db } from \"./firebase\";\n\nconst ImportHistory = ({ user }) => {\n  const [history, setHistory] = useState([]);\n\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (!user) return;\n\n      try {\n        const q = query(collection(db, \"userData\"), where(\"uid\", \"==\", user.uid));\n        const snapshot = await getDocs(q);\n\n        const batches = {};\n        snapshot.forEach((doc) => {\n          const data = doc.data();\n          const batchId = data.batchId;\n          if (!batches[batchId]) {\n            batches[batchId] = {\n              notes: data.notes || \"No notes\",\n              uploadedAt: data.uploadedAt?.toDate?.() || new Date(),\n              batchId,\n              shotCount: 0,\n            };\n          }\n          batches[batchId].shotCount += 1;\n        });\n\n        const sorted = Object.values(batches).sort((a, b) => b.uploadedAt - a.uploadedAt);\n        setHistory(sorted);\n      } catch (err) {\n        console.error(\"‚ùå Failed to fetch history:\", err);\n      }\n    };\n\n    fetchHistory();\n  }, [user]);\n\n  return (\n    <div className=\"bg-gray-900 text-white p-6 mt-6 rounded-lg max-w-xl mx-auto\" id=\"history\">\n      <h3 className=\"text-lg font-bold mb-4\">üìú Import History</h3>\n\n      {history.length === 0 ? (\n        <p className=\"text-gray-400\">No previous uploads found.</p>\n      ) : (\n        <ul className=\"space-y-3 text-sm\">\n          {history.map((entry) => (\n            <Link to={`/session/${entry.batchId}`} key={entry.batchId}>\n              <li className=\"p-4 rounded bg-gray-800 hover:bg-gray-700 transition cursor-pointer\">\n                <div className=\"font-bold\">üìù {entry.notes}</div>\n                <div className=\"text-gray-400\"><strong>üìÖ Date:</strong> {entry.uploadedAt.toLocaleString()}</div>\n                <div className=\"text-gray-400\"><strong>ÏÉ∑ (Shots):</strong> {entry.shotCount}</div>\n                <div className=\"text-gray-500 text-xs mt-2\">\n                  <strong>ID:</strong> {entry.batchId}\n                </div>\n              </li>\n            </Link>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default ImportHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}